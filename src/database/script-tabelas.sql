
CREATE DATABASE parkwisePI;
USE parkwisePI;

CREATE TABLE estacionamento(
	idEstacionamento int primary key auto_increment,
	nome varchar(45),
	telefone char(15),
	capacidadeVagas int,
	cnpjEstacionamento char(18),
	logradouro varchar(45),
	numeroEnd char(4),
	bairro varchar(45),
	email varchar(100),
	senha varchar(50)
);

CREATE TABLE funcionario(
	idFuncionario int primary key auto_increment,
	nomeFuncionario varchar(45),
	email varchar(100),
	senha varchar(45),
	funcao varchar(45),
	fkEstacionamento int,
	constraint fkUsuarioEstacionamento foreign key (fkEstacionamento)
	references estacionamento(idEstacionamento)
);

CREATE TABLE suporte(
	idSuporte int primary key auto_increment,
	email varchar(100),
	descricao varchar(300),
	dataSuporte date,
	fkFuncionario int,
	constraint fkSuporteFuncionario foreign key (fkFuncionario)
	references funcionario(idFuncionario)
);

CREATE TABLE sensor(
	idSensor int primary key auto_increment,
	localizacao int,
	fkEstacionamento int,
	constraint fkSensorEstacionamento foreign key (fkEstacionamento)
	references estacionamento(idEstacionamento)
);

CREATE TABLE fluxo(
	idFluxo int primary key auto_increment,
	entrada datetime,
	statusVaga tinyint,
	constraint chkStatus check (statusVaga in(0,1))
);

create table vaga(
	fkSensor int,
	fkFluxo int,
	constraint pk_composta primary key (fkSensor, fkFluxo),
    constraint fk_VagaSensor foreign key (fkSensor) references sensor(idSensor),
    constraint fk_VagaFluxo foreign key (fkFluxo) references fluxo(idFluxo)
);

INSERT INTO estacionamento (nome, telefone, capacidadeVagas, cnpjEstacionamento, logradouro, numeroEnd, bairro, email, senha) VALUES
    ('Estacionamento Central Park', '11912345678', 200, '12.345.678/0001-90', 'Rua das Flores', '150', 'Centro', 'contato@centralpark.com', 'Central123!'),
    ('Estacionamento Fácil Parking', '21923456789', 150, '23.456.789/0001-80', 'Avenida Rio Branco', '220', 'Copacabana', 'suporte@facilparking.com', 'Facil2024$'),
    ('Estacionamento Rápido', '31934567890', 120, '34.567.890/0001-70', 'Rua João Pinheiro', '300', 'Lourdes', 'info@rapidoestaciona.com', 'Rapido@789'),
    ('Estacionamento Segurança Total', '41945678901', 250, '45.678.901/0001-60', 'Avenida Paraná', '180', 'Batel', 'seguranca@totalpark.com', 'SegTotal#456'),
    ('Estacionamento VIP', '51956789012', 300, '56.789.012/0001-50', 'Rua dos Andradas', '75', 'Moinhos de Vento', 'vip@estacionamentovip.com', 'VipEstac2024!'),
    ('Estacionamento Econômico', '71967890123', 180, '67.890.123/0001-40', 'Avenida Sete de Setembro', '400', 'Comércio', 'economico@estacionaeco.com', 'Econo#321');
    
    insert into estacionamento (email, senha) values
	('gabriella.antunes@gmail.com', 'senha%123');
    
INSERT INTO funcionario (nomeFuncionario, email, senha, funcao, fkEstacionamento) VALUES
    ('João Silva', 'joao@centralpark.com', 'senha123', 'Gerente', 1),
    ('Maria Oliveira', 'maria@facilparking.com', 'senha456', 'Atendente', 2),
    ('Carlos Souza', 'carlos@rapido.com', 'senha789', 'Supervisor', 3),
    ('Ana Pereira', 'ana@segurancatotal.com', 'senha321', 'Gerente', 4),
    ('Lucas Lima', 'lucas@vip.com', 'senha654', 'Atendente', 5),
    ('Fernanda Santos', 'fernanda@economico.com', 'senha987', 'Supervisor', 6);
    
INSERT INTO suporte (email, descricao, dataSuporte, fkFuncionario) VALUES
    ('suporte@centralpark.com', 'Problema com o sistema de câmeras', '2024-12-01', 1),
    ('suporte@facilparking.com', 'Dúvida sobre funcionamento do sensor de vagas', '2024-12-02', 2),
    ('suporte@rapido.com', 'Problema de conexão no software de gestão', '2024-12-03', 3),
    ('suporte@segurancatotal.com', 'Erro na leitura das placas', '2024-12-04', 4),
    ('suporte@vip.com', 'Sistema de pagamento não está funcionando', '2024-12-05', 5),
    ('suporte@economico.com', 'Falha no registro de entrada de veículos', '2024-12-06', 6);


INSERT INTO fluxo (idFluxo, entrada, statusVaga) VALUES
(1, '2024-12-01 08:00:00', 1),
(2, '2024-12-01 09:00:00', 0),
(3, '2024-12-01 10:00:00', 1),
(4, '2024-12-01 11:00:00', 0),
(5, '2024-12-01 12:00:00', 1),
(6, '2024-12-01 13:00:00', 0),
(7, '2024-11-25 08:00:00', 1),
(8, '2024-11-25 09:30:00', 0),
(9, '2024-11-25 10:00:00', 1),
(10, '2024-11-25 11:15:00', 1),
(11, '2024-11-25 12:45:00', 0),
(12, '2024-11-25 14:00:00', 1),
(13, '2024-11-26 08:30:00', 1),
(14, '2024-11-26 09:30:00', 0),
(15, '2024-11-26 11:00:00', 1),
(16, '2024-11-26 12:15:00', 1),
(17, '2024-11-26 13:30:00', 0),
(18, '2024-11-26 14:30:00', 1),
(19, '2024-11-27 08:00:00', 1),
(20, '2024-11-27 09:30:00', 0),
(21, '2024-11-27 11:00:00', 1),
(22, '2024-11-27 12:30:00', 1),
(23, '2024-11-27 13:45:00', 0),
(24, '2024-11-27 14:15:00', 1),
(25, '2024-11-28 08:00:00', 1),
(26, '2024-11-28 09:00:00', 0),
(27, '2024-11-28 10:30:00', 1),
(28, '2024-11-28 11:45:00', 1),
(29, '2024-11-28 13:00:00', 0),
(30, '2024-11-28 14:00:00', 1),
(31, '2024-11-29 08:00:00', 1),
(32, '2024-11-29 09:30:00', 0),
(33, '2024-11-29 10:00:00', 1),
(34, '2024-11-29 11:30:00', 1),
(35, '2024-11-29 13:00:00', 0),
(36, '2024-11-29 14:30:00', 1),
(37, '2024-11-30 08:00:00', 1),
(38, '2024-11-30 09:30:00', 0),
(39, '2024-11-30 10:30:00', 1),
(40, '2024-11-30 11:45:00', 1),
(41, '2024-11-30 12:30:00', 0),
(42, '2024-11-30 14:00:00', 1),
(43, '2024-11-08 08:00:00', 1),
(44, '2024-11-08 09:30:00', 0),
(45, '2024-11-08 10:30:00', 1),
(46, '2024-11-08 11:45:00', 1),
(47, '2024-11-08 12:30:00', 0),
(48, '2024-11-08 14:00:00', 1),
(49, '2024-11-15 08:00:00', 1),
(50, '2024-11-15 09:30:00', 0),
(51, '2024-11-15 10:30:00', 1),
(52, '2024-11-15 11:45:00', 1),
(53, '2024-11-15 12:30:00', 0),
(54, '2024-11-15 14:00:00', 1),
(55, '2024-11-30 08:00:00', 1),
(56, '2024-11-30 09:30:00', 0),
(57, '2024-11-30 10:30:00', 1),
(58, '2024-11-30 11:45:00', 1),
(59, '2024-11-30 12:30:00', 0),
(60, '2024-11-30 14:00:00', 1),
(61, '2024-11-01 08:00:00', 1),
(62, '2024-11-01 09:30:00', 0),
(63, '2024-11-01 10:00:00', 1),
(64, '2024-11-01 11:15:00', 1),
(65, '2024-11-01 12:45:00', 0),
(66, '2024-11-01 14:00:00', 1),
(67, '2024-11-02 08:00:00', 1),
(68, '2024-11-02 09:30:00', 0),
(69, '2024-11-02 10:30:00', 1),
(70, '2024-11-02 11:45:00', 1),
(71, '2024-11-02 12:30:00', 0),
(72, '2024-11-02 14:00:00', 1),
(73, '2024-11-03 08:00:00', 1),
(74, '2024-11-03 09:30:00', 0),
(75, '2024-11-03 10:00:00', 1),
(76, '2024-11-03 11:15:00', 1),
(77, '2024-11-03 12:45:00', 0),
(78, '2024-11-03 14:00:00', 1),
(79, '2024-11-04 08:30:00', 1),
(80, '2024-11-04 09:30:00', 0),
(81, '2024-11-04 11:00:00', 1),
(82, '2024-11-04 12:15:00', 1),
(83, '2024-11-04 13:30:00', 0),
(84, '2024-11-04 14:30:00', 1),
(85, '2024-11-05 08:00:00', 1),
(86, '2024-11-05 09:30:00', 0),
(87, '2024-11-05 11:00:00', 1),
(88, '2024-11-05 12:30:00', 1),
(89, '2024-11-05 13:45:00', 0),
(90, '2024-11-05 14:15:00', 1),
(91, '2024-11-06 08:00:00', 1),
(92, '2024-11-06 09:00:00', 0),
(93, '2024-11-06 10:30:00', 1),
(94, '2024-11-06 11:45:00', 1),
(95, '2024-11-06 13:00:00', 0),
(96, '2024-11-06 14:00:00', 1),
(97, '2024-11-07 08:00:00', 1),
(98, '2024-11-07 09:30:00', 0),
(99, '2024-11-07 10:00:00', 1),
(100, '2024-11-07 11:30:00', 1),
(101, '2024-11-07 13:00:00', 0),
(102, '2024-11-30 14:30:00', 1),
(103, '2024-11-30 08:00:00', 1),
(104, '2024-11-30 09:30:00', 0),
(105, '2024-11-30 10:00:00', 1),
(106, '2024-11-30 11:30:00', 1),
(107, '2024-11-30 13:00:00', 0),
(108, '2024-11-08 14:30:00', 1),
(109, '2024-11-09 08:00:00', 1),
(110, '2024-11-09 09:30:00', 0),
(111, '2024-11-09 10:30:00', 1),
(112, '2024-11-09 11:45:00', 1),
(113, '2024-11-09 12:30:00', 0),
(114, '2024-11-09 14:00:00', 1),
(115, '2024-11-10 08:00:00', 1),
(116, '2024-11-10 09:30:00', 0),
(117, '2024-11-10 10:00:00', 1),
(118, '2024-11-10 11:30:00', 1),
(119, '2024-11-10 13:00:00', 0),
(120, '2024-11-10 14:30:00', 1),
(121, '2024-11-02 08:00:00', 1),
(122, '2024-12-02 09:30:00', 0),
(123, '2024-12-02 10:00:00', 1),
(124, '2024-12-02 11:30:00', 1),
(125, '2024-12-02 13:00:00', 0),
(126, '2024-12-02 14:30:00', 1),
(127, '2024-12-02 08:00:00', 1),
(128, '2024-12-02 09:30:00', 0),
(129, '2024-12-02 10:30:00', 1),
(130, '2024-12-02 11:45:00', 1),
(131, '2024-12-02 12:30:00', 0),
(132, '2024-12-01 14:30:00', 1),
(133, '2024-12-01 14:30:00', 1),
(134, '2024-12-01 14:30:00', 0),
(135, '2024-12-01 14:30:00', 1),
(136, '2024-12-01 14:30:00', 1),
(137, '2024-12-01 14:30:00', 0),
(138, '2024-12-01 14:30:00', 1),
(139, '2024-12-01 14:30:00', 1),
(140, '2024-12-01 14:30:00', 0),
(141, '2024-12-01 14:30:00', 0),
(142, '2024-12-01 14:30:00', 1),
(143, '2024-11-16 08:00:00', 1),
(144, '2024-11-26 17:00:00', 1),
(145, '2024-12-02 15:59:39', 0),
(146, '2024-12-02 16:02:18', 0),
(147, '2024-12-02 16:06:38', 0),
(148, '2024-12-02 16:06:42', 1),
(149, '2024-12-02 16:06:44', 0),
(150, '2024-12-02 16:06:45', 1),
(151, '2024-12-02 16:06:47', 0),
(152, '2024-12-02 16:06:58', 1),
(153, '2024-12-02 16:07:04', 0),
(154, '2024-12-02 16:07:13', 1),
(155, '2024-12-02 16:07:18', 0),
(156, '2024-12-02 16:08:56', 0),
(157, '2024-12-02 16:09:04', 1),
(158, '2024-12-02 16:09:09', 0),
(159, '2024-12-02 16:09:20', 1),
(160, '2024-12-02 16:09:27', 0),
(161, '2024-12-02 16:09:34', 1),
(162, '2024-12-02 16:09:40', 0),
(163, '2024-12-03 16:09:47', 1),
(164, '2024-12-03 16:09:53', 0),
(165, '2024-12-03 16:09:59', 1),
(166, '2024-12-03 16:10:05', 0),
(167, '2024-12-03 16:10:11', 1),
(168, '2024-12-03 16:10:17', 0),
(169, '2024-12-03 16:10:23', 1),
(170, '2024-12-03 16:10:29', 0),
(171, '2024-12-03 16:10:35', 1),
(172, '2024-12-03 16:10:41', 0),
(173, '2024-12-03 16:10:47', 1),
(174, '2024-12-03 16:10:53', 0),
(175, '2024-12-03 16:10:59', 1),
(176, '2024-12-03 16:11:05', 0),
(177, '2024-12-03 16:11:11', 1),
(178, '2024-12-03 16:11:17', 0),
(179, '2024-12-03 16:11:23', 1),
(180, '2024-12-03 16:11:29', 0),
(181, '2024-12-03 16:11:35', 1),
(182, '2024-12-03 09:11:41', 0),
(183, '2024-12-03 09:11:47', 1),
(184, '2024-12-03 09:11:53', 0),
(185, '2024-12-03 09:11:59', 1),
(186, '2024-12-03 09:12:05', 0),
(187, '2024-12-03 09:12:11', 1),
(188, '2024-12-03 09:12:17', 0),
(189, '2024-12-03 09:12:23', 1),
(190, '2024-12-03 09:12:29', 0),
(191, '2024-12-03 09:12:35', 1),
(192, '2024-12-03 09:12:41', 0),
(193, '2024-12-03 09:12:47', 1),
(194, '2024-12-04 09:12:53', 0),
(195, '2024-12-03 09:12:59', 1),
(196, '2024-12-03 09:13:05', 0),
(197, '2024-12-03 09:13:11', 1),
(198, '2024-12-03 09:13:17', 0),
(199, '2024-12-03 09:13:23', 1),
(200, '2024-12-03 09:13:29', 0),
(201, '2024-12-03 09:13:35', 1),
(202, '2024-12-03 09:13:41', 0),
(203, '2024-12-03 09:13:50', 1),
(204, '2024-12-03 09:13:53', 0),
(205, '2024-12-03 09:13:59', 1),
(206, '2024-12-03 09:14:05', 0),
(207, '2024-12-03 09:14:11', 1),
(208, '2024-12-03 09:14:17', 0),
(209, '2024-12-03 09:14:23', 1),
(210, '2024-12-03 09:14:29', 0),
(211, '2024-12-03 09:14:35', 1),
(212, '2024-12-03 09:14:41', 0),
(213, '2024-12-04 09:14:47', 1),
(214, '2024-12-04 09:14:53', 0),
(215, '2024-12-04 09:14:59', 1),
(216, '2024-12-04 09:15:05', 0),
(217, '2024-12-04 09:15:11', 1),
(218, '2024-12-04 09:15:17', 0),
(219, '2024-12-04 09:15:23', 1),
(220, '2024-12-04 09:15:29', 0),
(221, '2024-12-04 09:15:35', 1),
(222, '2024-12-04 09:15:41', 0),
(223, '2024-12-04 09:15:47', 1),
(224, '2024-12-04 09:15:53', 0),
(225, '2024-12-04 09:15:59', 1),
(226, '2024-12-04 09:16:05', 0),
(227, '2024-12-04 09:16:11', 1),
(228, '2024-12-04 09:16:17', 0),
(229, '2024-12-04 09:16:23', 1),
(230, '2024-12-04 09:16:29', 0),
(231, '2024-12-04 09:16:35', 1),
(232, '2024-12-04 09:16:41', 0),
(233, '2024-12-04 09:36:47', 1),
(234, '2024-12-04 09:46:53', 0),
(235, '2024-12-04 09:56:59', 1),
(236, '2024-12-04 10:17:05', 0),
(237, '2024-12-04 09:27:11', 1),
(238, '2024-12-04 09:17:17', 0),
(239, '2024-12-04 09:17:23', 1),
(240, '2024-12-04 09:17:29', 0),
(241, '2024-12-04 09:17:35', 1),
(242, '2024-12-04 09:17:41', 0),
(243, '2024-12-04 09:17:47', 1),
(244, '2024-12-04 09:17:53', 0),
(245, '2024-12-04 09:17:59', 1),
(246, '2024-12-04 09:18:05', 0),
(247, '2024-12-04 09:18:11', 1),
(248, '2024-12-04 09:18:17', 0),
(249, '2024-12-04 09:18:23', 1),
(250, '2024-12-04 09:18:29', 0),
(251, '2024-12-04 09:18:35', 1),
(252, '2024-12-04 09:18:41', 0),
(253, '2024-12-04 09:18:47', 1),
(254, '2024-12-04 09:18:53', 0),
(255, '2024-12-04 09:18:59', 1),
(256, '2024-12-04 09:19:05', 0),
(257, '2024-12-04 09:19:11', 1),
(258, '2024-12-04 09:19:17', 0),
(259, '2024-12-04 09:19:23', 1),
(260, '2024-12-04 09:19:29', 0),
(261, '2024-12-04 09:19:35', 1),
(262, '2024-12-04 09:19:41', 0),
(263, '2024-12-04 09:19:47', 1),
(264, '2024-12-04 09:19:53', 0),
(265, '2024-12-04 09:19:59', 1),
(266, '2024-12-04 09:20:05', 0),
(267, '2024-12-04 09:20:11', 1),
(268, '2024-12-04 09:20:17', 0),
(269, '2024-12-04 09:20:23', 1),
(270, '2024-12-04 09:20:29', 0),
(271, '2024-12-04 09:20:35', 1),
(272, '2024-12-04 09:20:41', 0),
(273, '2024-12-04 09:20:47', 1),
(274, '2024-12-04 09:20:53', 0),
(275, '2024-12-04 09:20:59', 1),
(276, '2024-12-04 09:21:05', 0),
(277, '2024-12-04 09:21:11', 1),
(278, '2024-12-04 09:21:17', 0),
(279, '2024-12-04 09:21:23', 1),
(280, '2024-12-04 09:21:29', 0),
(281, '2024-12-04 09:21:35', 1),
(282, '2024-12-04 09:21:41', 0),
(283, '2024-12-04 09:21:47', 1),
(284, '2024-12-04 09:21:53', 0),
(285, '2024-12-04 09:21:59', 1),
(286, '2024-12-04 09:22:05', 0),
(287, '2024-12-04 09:22:11', 1),
(288, '2024-12-04 09:22:17', 0),
(289, '2024-12-04 09:22:23', 1),
(290, '2024-12-04 09:22:29', 0),
(291, '2024-12-04 09:22:35', 1),
(292, '2024-12-04 09:22:41', 0),
(293, '2024-12-04 09:22:47', 1),
(294, '2024-12-04 09:22:53', 0),
(295, '2024-12-04 09:22:59', 1),
(296, '2024-12-04 09:23:05', 0),
(297, '2024-12-04 09:23:11', 1),
(298, '2024-12-04 09:23:17', 0),
(299, '2024-12-04 09:23:23', 1),
(300, '2024-12-04 09:23:29', 0),
(301, '2024-11-30 09:29:29', 1),
(302, '2024-11-30 09:35:29', 0),
(303, '2024-11-30 09:41:29', 1),
(304, '2024-11-30 09:47:29', 0),
(305, '2024-11-30 09:53:29', 1),
(306, '2024-11-30 09:59:29', 0),
(307, '2024-11-30 10:05:29', 1),
(308, '2024-11-30 10:11:29', 0),
(309, '2024-11-30 10:17:29', 1),
(310, '2024-11-30 10:23:29', 0),
(311, '2024-11-30 10:29:29', 1),
(312, '2024-11-30 10:35:29', 0),
(313, '2024-11-30 10:41:29', 1),
(314, '2024-11-30 10:47:29', 0),
(315, '2024-11-30 10:53:29', 1),
(316, '2024-11-30 10:59:29', 0),
(317, '2024-11-30 11:05:29', 1),
(318, '2024-11-30 11:11:29', 0),
(319, '2024-11-30 11:17:29', 1),
(320, '2024-11-30 11:23:29', 0),
(321, '2024-11-30 11:29:29', 1),
(322, '2024-11-30 11:35:29', 0),
(323, '2024-11-30 11:41:29', 1),
(324, '2024-11-30 11:47:29', 0),
(325, '2024-11-30 11:53:29', 1),
(326, '2024-11-30 11:59:29', 0),
(327, '2024-11-30 12:05:29', 1),
(328, '2024-11-30 12:11:29', 0),
(329, '2024-11-30 12:17:29', 1),
(330, '2024-11-30 12:23:29', 0),
(331, '2024-11-30 12:29:29', 1),
(332, '2024-11-30 12:35:29', 0),
(333, '2024-11-30 12:41:29', 1),
(334, '2024-11-30 12:47:29', 0),
(335, '2024-11-30 12:53:29', 1),
(336, '2024-11-30 12:59:29', 0),
(337, '2024-11-30 13:05:29', 1),
(338, '2024-11-30 13:11:29', 0),
(339, '2024-11-30 13:17:29', 1),
(340, '2024-11-30 13:23:29', 0),
(341, '2024-11-30 13:29:29', 1),
(342, '2024-11-30 13:35:29', 0),
(343, '2024-11-30 13:41:29', 1),
(344, '2024-11-04 13:47:29', 0),
(345, '2024-11-04 13:53:29', 1),
(346, '2024-11-04 13:59:29', 0),
(347, '2024-11-04 14:05:29', 1),
(348, '2024-11-04 14:11:29', 0),
(349, '2024-11-04 14:17:29', 1),
(350, '2024-11-04 14:23:29', 0),
(351, '2024-11-04 14:29:29', 1),
(352, '2024-11-04 14:35:29', 0),
(353, '2024-11-04 14:41:29', 1),
(354, '2024-11-04 14:47:29', 0),
(355, '2024-11-04 14:53:29', 1),
(356, '2024-11-04 14:59:29', 0),
(357, '2024-11-04 15:05:29', 1),
(358, '2024-11-04 15:11:29', 0),
(359, '2024-11-04 15:17:29', 1),
(360, '2024-11-04 15:23:29', 0),
(361, '2024-11-04 15:29:29', 1),
(362, '2024-11-04 15:35:29', 0),
(363, '2024-11-04 15:41:29', 1),
(364, '2024-11-04 15:47:29', 0),
(365, '2024-11-04 15:53:29', 1),
(366, '2024-11-04 15:59:29', 0),
(367, '2024-11-04 16:05:29', 1),
(368, '2024-11-04 16:11:29', 0),
(369, '2024-11-04 16:17:29', 1),
(370, '2024-11-04 16:23:29', 0),
(371, '2024-11-04 16:29:29', 1),
(372, '2024-11-04 16:35:29', 0),
(373, '2024-11-04 16:41:29', 1),
(374, '2024-11-04 16:47:29', 0),
(375, '2024-11-04 16:53:29', 1),
(376, '2024-11-04 16:59:29', 0),
(377, '2024-11-04 17:05:29', 1),
(378, '2024-11-04 17:11:29', 0),
(379, '2024-11-04 17:17:29', 1),
(380, '2024-11-04 17:23:29', 0),
(381, '2024-11-04 17:29:29', 1),
(382, '2024-11-04 17:35:29', 0),
(383, '2024-11-04 17:41:29', 1),
(384, '2024-11-04 17:47:29', 0),
(385, '2024-11-04 17:53:29', 1),
(386, '2024-11-04 17:59:29', 0),
(387, '2024-11-04 18:05:29', 1),
(388, '2024-11-04 18:11:29', 0),
(389, '2024-11-04 18:17:29', 1),
(390, '2024-11-04 18:23:29', 0),
(391, '2024-11-04 18:29:29', 1),
(392, '2024-11-04 18:35:29', 0),
(393, '2024-11-04 18:41:29', 1),
(394, '2024-11-04 18:47:29', 0),
(395, '2024-11-04 18:53:29', 1),
(396, '2024-11-04 18:59:29', 0),
(397, '2024-11-04 19:05:29', 1),
(398, '2024-11-04 19:11:29', 0),
(399, '2024-11-04 19:17:29', 1),
(400, '2024-11-04 19:23:29', 0),
(401, '2024-10-06 12:00:00', 1);

INSERT INTO fluxo (idFluxo, entrada, statusVaga) VALUES
(402, '2024-10-06 12:00:00', 1),
(403, '2024-10-06 12:02:00', 0),
(404, '2024-10-06 12:04:00', 1),
(405, '2024-10-06 12:06:00', 0),
(406, '2024-10-06 12:08:00', 1),
(407, '2024-10-06 12:10:00', 0),
(408, '2024-10-06 12:12:00', 1),
(409, '2024-10-06 12:14:00', 0),
(410, '2024-10-06 12:16:00', 1),
(411, '2024-10-06 12:18:00', 0),
(412, '2024-10-06 12:20:00', 1),
(413, '2024-10-06 12:22:00', 0),
(414, '2024-10-06 12:24:00', 1),
(415, '2024-10-06 12:26:00', 0),
(416, '2024-10-06 12:28:00', 1),
(417, '2024-10-06 12:30:00', 0),
(418, '2024-10-06 12:32:00', 1),
(419, '2024-10-06 12:34:00', 0),
(420, '2024-10-06 12:36:00', 1),
(421, '2024-10-06 12:38:00', 0),
(422, '2024-10-06 12:40:00', 1),
(423, '2024-10-06 12:42:00', 0),
(424, '2024-10-06 12:44:00', 1),
(425, '2024-10-06 12:46:00', 0),
(426, '2024-10-06 12:48:00', 1),
(427, '2024-10-06 12:50:00', 0),
(428, '2024-10-06 12:52:00', 1),
(429, '2024-10-06 12:54:00', 0),
(430, '2024-10-06 12:56:00', 1),
(431, '2024-10-06 12:58:00', 0),
(432, '2024-10-06 13:00:00', 1),
(433, '2024-10-06 13:02:00', 0),
(434, '2024-10-06 13:04:00', 1),
(435, '2024-10-06 13:06:00', 0),
(436, '2024-10-06 13:08:00', 1),
(437, '2024-10-06 13:10:00', 0),
(438, '2024-10-06 13:12:00', 1),
(439, '2024-10-06 13:14:00', 0),
(440, '2024-10-06 13:16:00', 1),
(441, '2024-10-06 13:18:00', 0),
(442, '2024-10-06 13:20:00', 1),
(443, '2024-10-06 13:22:00', 0),
(444, '2024-10-06 13:24:00', 1),
(445, '2024-10-06 13:26:00', 0),
(446, '2024-10-06 13:28:00', 1),
(447, '2024-10-06 13:30:00', 0),
(448, '2024-10-06 13:32:00', 1),
(449, '2024-10-06 13:34:00', 0),
(450, '2024-10-06 13:36:00', 1),
(451, '2024-10-06 13:38:00', 0),
(452, '2024-10-06 13:40:00', 1);



INSERT INTO sensor (idSensor, localizacao, fkEstacionamento) VALUES
(1, 1, 1),
(2, 2, 2),
(3, 3, 3),
(4, 4, 4),
(5, 5, 5),
(6, 6, 6),
(7, 2, 1),
(8, 3, 1),
(9, 7, 1),
(10, 8, 1),
(11, 9, 1),
(12, 10, 1),
(13, 11, 1),
(14, 12, 1),
(15, 13, 1),
(16, 14, 1),
(17, 15, 1),
(18, 16, 1),
(19, 17, 1),
(20, 18, 1),
(21, 19, 1),
(22, 20, 1),
(23, 21, 1),
(24, 22, 1),
(25, 23, 1),
(26, 24, 1),
(27, 25, 1),
(28, 26, 1),
(29, 27, 1),
(30, 28, 1),
(31, 29, 1),
(32, 30, 1),
(33, 31, 1),
(34, 32, 1),
(35, 33, 1),
(36, 34, 1),
(37, 35, 1),
(38, 36, 1),
(39, 37, 1),
(40, 38, 1),
(41, 39, 1),
(42, 40, 1),
(43, 41, 1),
(44, 42, 1),
(45, 43, 1),
(46, 44, 1),
(47, 45, 1),
(48, 46, 1),
(49, 47, 1),
(50, 48, 1),
(51, 49, 1),
(52, 50, 1),
(53, 51, 1),
(54, 52, 1),
(55, 53, 1),
(56, 54, 1),
(57, 55, 1),
(58, 56, 1),
(59, 57, 1),
(60, 58, 1);

INSERT INTO vaga (fkSensor, fkFluxo) VALUES
(1, 1),
(2, 2),
(3, 3),
(4, 4),
(5, 5),
(6, 6),
(1, 7),
(1, 8),
(1, 9),
(1, 10),
(1, 11),
(1, 12),
(1, 13),
(2, 13),
(1, 14),
(2, 14),
(1, 15),
(2, 15),
(1, 16),
(2, 16),
(1, 17),
(2, 17),
(1, 18),
(2, 18),
(3, 19),
(3, 20),
(3, 21),
(3, 22),
(3, 23),
(3, 24),
(4, 25),
(4, 26),
(4, 27),
(4, 28),
(4, 29),
(4, 30),
(5, 31),
(5, 32),
(5, 33),
(5, 34),
(5, 35),
(5, 36),
(6, 37),
(6, 38),
(6, 39),
(6, 40),
(6, 41),
(6, 42),
(1, 43),
(1, 44),
(1, 45),
(1, 46),
(1, 47),
(1, 48),
(1, 49),
(1, 50),
(1, 51),
(1, 52),
(1, 53),
(1, 54),
(3, 55),
(3, 56),
(3, 57),
(3, 58),
(3, 59),
(3, 60),
(4, 61),
(4, 62),
(4, 63),
(4, 64),
(4, 65),
(4, 66),
(5, 67),
(5, 68),
(5, 69),
(5, 70),
(5, 71),
(5, 72),
(6, 73),
(6, 74),
(6, 75),
(6, 76),
(6, 77),
(6, 78),
(1, 79),
(1, 80),
(1, 81),
(1, 82),
(1, 83),
(1, 84),
(2, 85),
(2, 86),
(2, 87),
(2, 88),
(2, 89),
(2, 90),
(3, 91),
(3, 92),
(3, 93),
(3, 94),
(3, 95),
(3, 96),
(4, 97),
(4, 98),
(4, 99),
(4, 100),
(4, 101),
(4, 102),
(5, 103),
(5, 104),
(5, 105),
(5, 106),
(5, 107),
(5, 108),
(6, 109),
(6, 110),
(6, 111),
(6, 112),
(6, 113),
(6, 114),
(1, 115),
(1, 116),
(1, 117),
(1, 118),
(1, 119),
(1, 120),
(2, 121),
(2, 122),
(2, 123),
(2, 124),
(2, 125),
(2, 126),
(1, 127),
(1, 128),
(1, 129),
(1, 130),
(1, 131),
(1, 132),
(1, 133),
(1, 134),
(1, 135),
(1, 136),
(1, 137),
(1, 138),
(7, 139),
(7, 140),
(1, 141),
(7, 142),
(8, 143),
(8, 144),
(1, 147),
(1, 148),
(1, 149),
(1, 150),
(1, 151),
(1, 152),
(1, 153),
(1, 154),
(1, 155),
(1, 156),
(1, 157),
(1, 158),
(1, 159),
(1, 160),
(1, 161),
(17, 162),
(16, 163),
(1, 164),
(1, 165),
(14, 166),
(12, 167),
(1, 168),
(8, 169),
(9, 170),
(10, 171),
(1, 172),
(11, 173),
(12, 174),
(11, 175),
(1, 176),
(13, 177),
(13, 178),
(12, 179),
(13, 180),
(15, 181),
(13, 182),
(11, 183),
(4, 184),
(6, 185),
(2, 186),
(3, 187),
(1, 188),
(14, 189),
(12, 190),
(15, 191),
(16, 192),
(14, 193),
(11, 194),
(17, 195),
(16, 196),
(15, 197),
(14, 198),
(3, 199),
(12, 200),
(15, 201),
(16, 202),
(17, 203),
(18, 204),
(19, 205),
(20, 206),
(21, 207),
(22, 208),
(23, 209),
(24, 210),
(25, 211),
(26, 212),
(27, 213),
(28, 214),
(29, 215),
(30, 216),
(9, 217),
(10, 218),
(11, 219),
(19, 220),
(21, 221),
(35, 222),
(38, 223),
(40, 224),
(36, 225),
(17, 226),
(28, 227),
(14, 228),
(13, 229),
(12, 230),
(16, 231),
(28, 232),
(34, 233),
(40, 234),
(35, 235),
(26, 236),
(17, 237),
(8, 238),
(9, 239),
(10, 240),
(11, 241),
(12, 242),
(13, 243),
(14, 244),
(15, 245),
(16, 246),
(17, 247),
(18, 248),
(19, 249),
(20, 250),
(21, 251),
(22, 252),
(23, 253),
(24, 254),
(25, 255),
(26, 256),
(27, 257),
(28, 258),
(29, 259),
(30, 260),
(31, 261),
(32, 262),
(13, 263),
(11, 264),
(5, 265),
(32, 266),
(7, 267),
(8, 268),
(19, 269),
(10, 270),
(11, 271),
(12, 272),
(13, 273),
(14, 274),
(16, 275),
(16, 276),
(21, 277), 
(18, 278),
(19, 279),
(21, 280),
(21, 281),
(22, 282),
(31, 283),
(36, 284),
(31, 285),
(37, 286),
(38, 287),
(39, 288),
(40, 289),
(35, 290),
(31, 291),
(32, 292),
(33, 293),
(34, 294),
(32, 295),
(31, 296),
(31, 297),
(32, 298),
(30, 299),
(32, 300),
(12, 301),
(13, 302),
(14, 303),
(15, 304),
(16, 305),
(17, 306),
(18, 307),
(19, 308),
(20, 309),
(11, 310),
(21, 311),
(22, 312),
(23, 313),
(24, 314),
(25, 315),
(26, 316),
(27, 317),
(28, 318),
(49, 319),
(30, 320),
(31, 321),
(23, 322),
(36, 323),
(22, 324),
(42, 325),
(41, 326),
(47, 327),
(25, 328),
(43, 329),
(22, 330),
(11, 331),
(42, 332),
(43, 333),
(34, 334),
(43, 335),
(46, 336),
(42, 337),
(42, 338),
(43, 339),
(32, 340),
(12, 341),
(22, 342),
(23, 343),
(44, 344),
(43, 345),
(42, 346),
(41, 347),
(35, 348),
(26, 349),
(34, 350),
(57, 351),
(28, 352),
(33, 353),
(54, 354),
(32, 355),
(25, 356),
(36, 357),
(60, 358),
(31, 359),
(42, 360),
(38, 361),
(40, 362),
(39, 363),
(41, 364),
(35, 365),
(56, 366),
(39, 367),
(57, 368),
(58, 369),
(53, 370),
(30, 371),
(32, 372),
(55, 373),
(36, 374),
(29, 375),
(31, 376),
(37, 377),
(51, 378),
(53, 379),
(59, 380),
(41, 381),
(35, 382),
(26, 383),
(54, 384),
(57, 385),
(28, 386),
(38, 387),
(35, 388),
(53, 389),
(25, 390),
(36, 391),
(29, 392),
(50, 393),
(37, 394),
(38, 395),
(57, 396),
(37, 397),
(56, 398),
(55, 399),
(41, 400),
(52, 401),
(1, 403),
(2, 404),
(3, 405),
(1, 406),
(2, 407),
(3, 408),
(1, 409),
(2, 410),
(3, 411),
(1, 412),
(2, 413),
(3, 414),
(1, 415),
(2, 416),
(3, 417),
(1, 418),
(2, 419),
(3, 420),
(1, 421),
(2, 422),
(3, 423),
(1, 424),
(2, 425),
(3, 426),
(1, 427),
(2, 428),
(3, 429),
(1, 430),
(2, 431),
(3, 432),
(1, 433),
(2, 434),
(3, 435),
(1, 436),
(2, 437),
(3, 438),
(1, 439),
(2, 440),
(3, 441),
(1, 442),
(2, 443),
(3, 444),
(1, 445),
(2, 446),
(3, 447),
(1, 448),
(2, 449),
(3, 450),
(1, 451),
(2, 452);


SET GLOBAL sql_mode=(SELECT REPLACE(@@sql_mode,'ONLY_FULL_GROUP_BY',''));

CREATE VIEW dia_de_pico AS 
SELECT 
    e.idEstacionamento,
    CASE 
        WHEN DAYOFWEEK(f.entrada) = 1 THEN 'Domingo'
        WHEN DAYOFWEEK(f.entrada) = 2 THEN 'Segunda-feira'
        WHEN DAYOFWEEK(f.entrada) = 3 THEN 'Terça-feira'
        WHEN DAYOFWEEK(f.entrada) = 4 THEN 'Quarta-feira'
        WHEN DAYOFWEEK(f.entrada) = 5 THEN 'Quinta-feira'
        WHEN DAYOFWEEK(f.entrada) = 6 THEN 'Sexta-feira'
        WHEN DAYOFWEEK(f.entrada) = 7 THEN 'Sábado'
    END AS dia_da_semana,
    f.entrada, 
    f.statusVaga
FROM fluxo AS f
JOIN vaga AS v ON v.fkFluxo = f.idFluxo
JOIN sensor AS s ON s.idSensor = v.fkSensor
JOIN estacionamento AS e ON s.fkEstacionamento = e.idEstacionamento
WHERE f.statusVaga = 1
    AND WEEK(f.entrada, 1) = WEEK(CURDATE(), 1);  
    
   /* SELECT 
    idEstacionamento,
    dia_da_semana,
    COUNT(*) AS total_carros_estacionados
FROM dia_de_pico
WHERE idEstacionamento = 1
GROUP BY 
    idEstacionamento, dia_da_semana ORDER BY total_carros_estacionados DESC; 
*/
